(this.webpackJsonpmylinks=this.webpackJsonpmylinks||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(7),r=n.n(o),l=(n(14),n(1)),s=n(2),c=n(4),u=n(3),m=(n(15),n(16),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){if(!this.props.show)return null;return a.a.createElement("div",{className:"backdrop",style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50}},a.a.createElement("div",{className:"modal",style:{backgroundColor:"#fff",borderRadius:5,margin:"0 auto",maxWidth:750,minHeight:40}},this.props.children))}}]),n}(a.a.Component)),f={theme:{missingFavIconColor:"blue"},hideShortcuts:!1},d=a.a.createContext(f);function h(e){e.list.reverse().forEach(v)}function v(e){window.open(e.url)}function y(e,t){var n=e.favicon;return n?/^.*:\/\//.test(n)?n:(null===t||void 0===t?void 0:t.replace("$1",n))||null:0===(null===n||void 0===n?void 0:n.length)?null:function(e,t){if(t)try{var n=new URL(e).host;if(n)return t.replace("$1",n)}catch(i){}return null}(e.url,t)}var k=function(){function e(t){Object(l.a)(this,e),this.myLinks=t,this.attachWidgetTolinks()}return Object(s.a)(e,[{key:"attachWidgetTolinks",value:function(){this.myLinks.columns.flat().forEach((function(e){e.list.forEach((function(t){t.widget=e}))}))}},{key:"findWidgetById",value:function(e){return this.myLinks.columns.flat().find((function(t){return t.id===e}))}},{key:"hasShortcuts",value:function(){return e=this.myLinks,t=function(e,t){return!!t.shortcut},e.columns.some((function(e){return e.some((function(e){return e.list.some((function(n){return t(e,n)}))}))}));var e,t}},{key:"applyBackground",value:function(){var e,t=null===(e=this.myLinks.theme)||void 0===e?void 0:e.backgroundImage,n=document.body;n.style.backgroundImage=t?"url(".concat(t,")"):""}},{key:"applyTheme",value:function(){var t=this.myLinks.theme;t&&(e.setColor("--missing-favicon-color",t.missingFavIconColor),e.setColor("--link-key-background",t.linkKeyBackground),e.setColor("--link-key-color",t.linkKeyColor))}},{key:"createImage",value:function(e,t,n,i){var a=document.createElement("canvas"),o=a.getContext("2d");return o?(a.width=t,a.height=n,o.fillStyle=i,o.fillRect(0,0,t,n),o.fill(),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0),a.toDataURL()):null}},{key:"applyColorToFavIcon",value:function(e){var t=this;if(e){var n=document.querySelector("link[rel~='icon']");if(n){var i=new Image;i.src=n.href,i.onload=function(a){var o=t.createImage(i,16,16,e);o&&(n.type="image/x-icon",n.href=o)}}}}}],[{key:"setColor",value:function(e,t){t?document.documentElement.style.setProperty(e,t):document.documentElement.style.removeProperty(e)}}]),e}(),p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.context,t=this.props.value,n={visibility:e.hideShortcuts||!t.shortcut?"collapse":"visible"};return a.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"ml-widget-item-link"},a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"left-items"},this.image(t),a.a.createElement("div",{className:"label"},t.label)),a.a.createElement("div",{className:"right-items"},a.a.createElement("kbd",{style:n},t.shortcut))))}},{key:"image",value:function(e){var t=y(e,this.context.faviconService);return t?a.a.createElement("img",{src:t,className:"ml-favicon",alt:""}):a.a.createElement("div",{className:"missing-favicon ml-missing-favicon"})}}]),n}(a.a.Component);p.contextType=d;var g=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.value,t=e.list.map((function(e){return a.a.createElement("li",{key:e.url},a.a.createElement(p,{value:e}))}));return a.a.createElement("div",{className:"ml-widget","data-list-id":e.id},a.a.createElement("div",{className:"ml-widget-label"},a.a.createElement("h2",null,e.title),a.a.createElement("span",{className:"ml-toolbar",onClick:function(){return h(e)}},a.a.createElement("i",{className:"fa fa-external-link-alt"}))),a.a.createElement("ul",null,t))}}]),n}(a.a.Component),b=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.value.map((function(e){return a.a.createElement(g,{key:e.id,value:e})}));return a.a.createElement("section",{className:"ml-rows"},e)}}]),n}(a.a.Component),E=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=(this.props.columns||[]).map((function(e,t){return a.a.createElement(b,{key:t,value:e})}));return a.a.createElement("section",{className:"ml-columns"},e)}}]),n}(a.a.Component),C=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,null,[{key:"fromData",value:function(e){O.loadData((function(t){e(t)}))}},{key:"fromFile",value:function(e,t){O.loadFromFile(e,(function(e){t(e)}))}}]),e}(),O=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,null,[{key:"loadData",value:function(t){var n=null,i=localStorage.getItem("myLinksData");if(i)try{n=e.loadFromObject(JSON.parse(i))}catch(a){window.alert(a)}t(n)}},{key:"loadFromObject",value:function(e){return e}},{key:"loadFromFile",value:function(t,n){var i=new FileReader;i.onload=function(t){var i=t.target.result;try{n(e.loadFromObject(JSON.parse(i))),localStorage.setItem("myLinksData",i)}catch(t){window.alert(t)}},i.readAsText(t)}}]),e}(),w=function(){function e(){var t=this;Object(l.a)(this,e),this.mouseX=0,this.mouseY=0,this.myLinksHolder=void 0,this.buffer="",document.addEventListener("mousemove",(function(e){return t.storeMousePosition(e)}),!1),document.addEventListener("mouseenter",(function(e){return t.storeMousePosition(e)}),!1)}return Object(s.a)(e,[{key:"setup",value:function(e){this.myLinksHolder=e,this.mouseX=0,this.mouseY=0}},{key:"openFromMousePosition",value:function(){if(this.myLinksHolder){var e=this.findElement(document.elementFromPoint(this.mouseX,this.mouseY),"ml-widget");if(e&&e.dataset.listId){var t=this.myLinksHolder.findWidgetById(e.dataset.listId);t&&h(t)}}}},{key:"findElement",value:function(e,t){for(;e;){if(Array.from(e.classList).some((function(e){return e===t})))return e;e=e.parentElement}return null}},{key:"storeMousePosition",value:function(e){this.mouseX=e.clientX,this.mouseY=e.clientY}},{key:"keyDown",value:function(e){var t=this;if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return!1;if("a"===e.key)this.buffer="",this.openFromMousePosition();else if(this.myLinksHolder){this.buffer+=e.key;var n=function(e,t){var n=[];return e.columns.forEach((function(e){e.forEach((function(e){e.list.forEach((function(i){t(e,i)&&n.push(i)}))}))})),n}(this.myLinksHolder.myLinks,(function(e,n){var i;return!0===(null===(i=n.shortcut)||void 0===i?void 0:i.startsWith(t.buffer))}));0===n.length?this.buffer="":1===n.length&&n[0].shortcut===this.buffer&&(this.buffer="",v(n[0]))}return!0}}],[{key:"instance",value:function(){return this._instance||(this._instance=new this),this._instance}}]),e}();w._instance=void 0;var S=n(5),j=(n(17),n(8)),L=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a,o;Object(l.a)(this,n),(o=t.call(this,e)).listRefs=new Map,o.inputRef=i.createRef(),o.fuse=void 0,o.state={result:[],selectedIndex:-1},o.onChange=o.onChange.bind(Object(S.a)(o)),o.onKeyDown=o.onKeyDown.bind(Object(S.a)(o)),o.onClick=o.onClick.bind(Object(S.a)(o)),o.onDoubleClick=o.onDoubleClick.bind(Object(S.a)(o));var r=(null===(a=o.props.widgets)||void 0===a?void 0:a.flat().map((function(e){return e.list})).flat())||[];return o.fuse=new j.a(r,{keys:["label"]}),o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"onClick",value:function(e,t){return e.preventDefault(),e.stopPropagation(),this.inputRef.current.focus(),this.setState({selectedIndex:t}),!0}},{key:"onDoubleClick",value:function(e,t){return e.preventDefault(),e.stopPropagation(),this.inputRef.current.focus(),this.props.onSelected(this.state.result[t].link),!0}},{key:"onKeyDown",value:function(e){var t=this.state.selectedIndex,n=-1;if(38===e.keyCode)t>0&&(n=t-1);else if(40===e.keyCode)t<this.state.result.length-1&&(n=t+1);else{if(13!==e.keyCode)return!1;t>=0&&this.props.onSelected(this.state.result[t].link)}if(-1!==n){var i=this.state.result[n];this.listRefs.get(i.id).current.scrollIntoView({block:"nearest",inline:"nearest"}),this.setState({selectedIndex:n})}return e.preventDefault(),!0}},{key:"render",value:function(){var e=this;return i.createElement("div",{className:"link-selector"},i.createElement("div",{className:"input-container"},i.createElement("i",{className:"fas fa-search icon"}),i.createElement("input",{type:"text",ref:this.inputRef,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Search",spellCheck:"false",className:"input-box"})),i.createElement("div",{className:"list"},i.createElement("ul",null,this.state.result.map((function(t,n){var a;return i.createElement("li",{onClick:function(t){return e.onClick(t,n)},onDoubleClick:function(t){return e.onDoubleClick(t,n)},className:n===e.state.selectedIndex?"selected":"none",ref:e.listRefs.get(t.id),key:t.id},i.createElement("i",{className:"list-image"},e.image(t.link)),i.createElement("div",null,(null===(a=t.link.widget)||void 0===a?void 0:a.title)||""," - ",t.link.label))})))))}},{key:"onChange",value:function(e){var t=e.target.value,n=this.filter(t);this.listRefs=n.reduce((function(e,t){return e.set(t.id,i.createRef()),e}),new Map),this.setState({result:n,selectedIndex:n.length?0:-1})}},{key:"filter",value:function(e){return 0===e.length?[]:this.fuse.search(e).map((function(e){return{id:e.item.id,link:e.item}}))}},{key:"image",value:function(e){var t=y(e,this.context.faviconService);return t?i.createElement("img",{src:t,alt:""}):i.createElement("div",{className:"missing-image missing-favicon"})}}]),n}(i.Component);L.contextType=d;var N=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(l.a)(this,n),(i=t.call(this,e)).myLinksHolder=void 0,i.onLinkSelected=function(e){i.toggleModal(),window.requestIdleCallback((function(){return v(e)}))},i.toggleModal=function(){i.setState((function(e){return{isOpen:!e.isOpen}}))};var a=JSON.parse(JSON.stringify(f));return a.hideShortcuts=i.hideShortcuts,i.state={columns:[[]],config:a,hasShortcuts:!1,isOpen:!1},i}return Object(s.a)(n,[{key:"keyDown",value:function(e){return this.state.isOpen?27===e.keyCode&&(this.toggleModal(),!0):" "===e.key?(e.stopPropagation(),e.preventDefault(),this.toggleModal(),!0):w.instance().keyDown(e)}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.keyDown(t)}),!1),C.fromData((function(t){e.reloadAll(t)}))}},{key:"render",value:function(){var e,t=this,n={visibility:this.state.hasShortcuts?"visible":"collapse"};return a.a.createElement(d.Provider,{value:this.state.config},a.a.createElement("div",{className:"ml-wrapper"},a.a.createElement("div",{className:"ml-grid"},a.a.createElement(E,{columns:this.state.columns})),a.a.createElement("label",{className:"toolbar-icon",title:"Load configuration from local file"},a.a.createElement("i",{className:"fa fa-file-import"}),a.a.createElement("input",{type:"file",id:"files",name:"files[]",accept:"application/json",onChange:function(e){return t.handleFileSelect(e)}})),a.a.createElement("label",{className:"toolbar-icon",title:"Toogle shortcuts visibility",style:n,onClick:function(e){return t.onClickKeyboard(e)}},a.a.createElement("i",{className:"fa fa-keyboard"})),a.a.createElement(m,{show:this.state.isOpen,onClose:this.toggleModal},a.a.createElement(L,{onSelected:this.onLinkSelected,widgets:null===(e=this.myLinksHolder)||void 0===e?void 0:e.myLinks.columns}))))}},{key:"reloadAll",value:function(e){var t;e&&(this.myLinksHolder=new k(e),this.myLinksHolder.applyBackground(),this.myLinksHolder.applyTheme(),this.myLinksHolder.applyColorToFavIcon(null===(t=e.theme)||void 0===t?void 0:t.missingFavIconColor),w.instance().setup(this.myLinksHolder),this.setState({config:this.buildConfig(e),columns:e.columns,hasShortcuts:this.myLinksHolder.hasShortcuts()}))}},{key:"onClickKeyboard",value:function(e){this.myLinksHolder&&(this.hideShortcuts=!this.hideShortcuts,this.setState({config:this.buildConfig(this.myLinksHolder.myLinks)}))}},{key:"handleFileSelect",value:function(e){var t=this,n=e.target.files[0];e.target.value=null,C.fromFile(n,(function(e){t.reloadAll(e)}))}},{key:"buildConfig",value:function(e){var t,n;return{theme:{missingFavIconColor:null===(t=e.theme)||void 0===t?void 0:t.missingFavIconColor},faviconService:null===(n=e.config)||void 0===n?void 0:n.faviconService,hideShortcuts:this.hideShortcuts}}},{key:"hideShortcuts",get:function(){return"1"===localStorage.getItem("hideShortcuts")||!1},set:function(e){localStorage.setItem("hideShortcuts",e?"1":"0")}}]),n}(a.a.Component);var I=function(){return a.a.createElement(N,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);